{"version":3,"file":"index.js","sources":["../src/js/components/show-messages.js","../src/js/utils/refs.js","../src/js/components/loading.js","../src/js/api/api-service.js","../src/js/components/render-functions.js","../src/js/components/update-markup.js","../src/js/components/modal-form.js","../src/js/components/delete-all-nodes.js","../src/js/components/search-form.js","../src/js/components/node-btns.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\n\n// Show Different Type of Messages\nexport const showErrorMessage = message => {\n  iziToast.error({\n    iconUrl: './img/bi_x-octagon.svg',\n    position: 'topRight',\n    progressBarColor: '#B51B1B',\n    message,\n    messageColor: '#FAFAFB',\n    backgroundColor: '#EF4040',\n  });\n};\n\nexport const showSuccessMessage = message => {\n  iziToast.error({\n    iconUrl: '/img/bi_check2-circle.svg',\n    position: 'topRight',\n    progressBarColor: '#326101',\n    message,\n    messageColor: '#FAFAFB',\n    backgroundColor: '#59A10D',\n  });\n};\n\nexport const showWarningMessage = message => {\n  iziToast.error({\n    iconUrl: './img/bi_exclamation-triangle.svg',\n    position: 'topRight',\n    progressBarColor: '#BB7B10',\n    message,\n    messageColor: '#FAFAFB',\n    backgroundColor: '#FFA000',\n  });\n};\n","// DOM Items\n\nexport const refs = {\n  form: document.querySelector('.form'),\n  headerBtns: document.querySelector('.header-btns'),\n  modalOverlay: document.querySelector('.modal-overlay'),\n  modalForm: document.querySelector('.modal-form'),\n  list: document.querySelector('.nodes-list'),\n  loader: document.querySelector('.loader'),\n};\n","import { refs } from '../utils/refs';\n\n// Loading\nexport const addLoader = () => {\n  refs.loader.classList.add('is-loading');\n};\n\nexport const removeLoader = () => {\n  refs.loader.classList.remove('is-loading');\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://67d5879cd2c7857431f0aed3.mockapi.io/nodes/';\n\n// Get All Nodes\nexport const getAllNodes = async () => {\n  try {\n    const response = await axios.get('');\n    return response.data;\n  } catch (error) {\n    console.log('Something went wrong with downloading nodes!');\n    throw error;\n  }\n};\n\n// Add new Note\nexport const addNewNode = async userData => {\n  try {\n    const response = await axios.post('', userData);\n    return response.data;\n  } catch (error) {\n    console.log('Something went wrong with adding node!');\n    throw error;\n  }\n};\n\n// Get Unique Nodes\nexport const getUniqueNodes = async searchRequest => {\n  try {\n    const response = await axios.get('', { params: { title: searchRequest } });\n    return response.data;\n  } catch (error) {\n    console.log('Something went wrong with searching nodes!');\n    throw error;\n  }\n};\n\n// Delete Node\nexport const deleteNode = async nodeId => {\n  try {\n    const response = await axios.delete(`${nodeId}`);\n    console.log(`Deleted node ${nodeId}`);\n    return response.data;\n  } catch (error) {\n    console.log(`Something went wrong with deleting node!`);\n    throw error;\n  }\n};\n","import { refs } from '../utils/refs';\n\n// Markup\nconst createMarkup = ({ id, title, description }) => {\n  return `\n    <li class=\"nodes-item\" data-id=\"${id}\">\n          <h3 class=\"nodes-item-title\">${title}</h3>\n          <p class=\"nodes-item-description\">${description}</p>\n          <div class=\"nodes-item-btns\">\n            <button class=\"edit-node-btn\" type=\"button\" id=\"editNodeBtn\">Edit</button>\n            <button class=\"delete-node-btn\" type=\"button\" id=\"deleteNodeBtn\">Delete</button>\n          </div>\n        </li>\n    `;\n};\n\n// Rendering nodes\nexport const renderMarkup = data => {\n  const markup = data.map(node => createMarkup(node)).join('');\n  refs.list.innerHTML = markup;\n};\n","import { renderMarkup } from './render-functions';\nimport { getAllNodes } from '../api/api-service';\n\n// Update Markup\nexport const updateMarkup = async () => {\n  const data = await getAllNodes();\n  renderMarkup(data);\n};\n","import {\n  showErrorMessage,\n  showSuccessMessage,\n  showWarningMessage,\n} from './show-messages';\nimport { addLoader, removeLoader } from './loading';\nimport { addNewNode } from '../api/api-service';\nimport { updateMarkup } from './update-markup';\nimport { refs } from '../utils/refs';\n\n// Modal Form\nexport const onModalFormClick = async event => {\n  event.preventDefault();\n\n  const inputValue = event.target.elements.nodeInput.value.trim();\n  const textareaValue = event.target.elements.nodeTextarea.value.trim();\n\n  if (!inputValue || !textareaValue) {\n    showWarningMessage('Fill all fields');\n    return;\n  }\n\n  const userNode = {\n    title: inputValue,\n    description: textareaValue,\n  };\n\n  try {\n    addLoader();\n    await addNewNode(userNode);\n    await updateMarkup();\n    showSuccessMessage('Added new node!');\n  } catch (error) {\n    showErrorMessage('Error adding note');\n  } finally {\n    closeModal();\n    removeLoader();\n    refs.modalForm.removeEventListener('submit', onModalFormClick);\n    document.removeEventListener('keydown', onHandleEscapeKey);\n    refs.modalOverlay.removeEventListener('click', modalOverlayClose);\n    event.target.reset();\n  }\n};\n\n// Modal Close\nexport const modalOverlayClose = event => {\n  if (event.target === event.currentTarget) {\n    closeModal();\n  }\n  if (event.target.matches('#modalCloseBtn')) {\n    closeModal();\n  }\n};\n\nexport const onHandleEscapeKey = event => {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n};\n\nconst closeModal = () => {\n  refs.modalOverlay.classList.remove('is-open');\n};\n","import { deleteNode, getAllNodes } from '../api/api-service';\nimport { addLoader, removeLoader } from './loading';\nimport { showErrorMessage } from './show-messages';\nimport { updateMarkup } from './update-markup';\n\n// Delete All Items\nexport const onDeleteAllBtnClick = async () => {\n  try {\n    addLoader();\n    const data = await getAllNodes();\n    if (!data) {\n      showErrorMessage('Nothing to delete');\n      return;\n    }\n\n    const result = await Promise.allSettled(\n      data.map(({ id }) => deleteNode(id))\n    );\n\n    console.log(result);\n\n    await updateMarkup();\n  } catch (error) {\n    showErrorMessage('Something went wrong with deleting all Nodes!');\n  } finally {\n    removeLoader();\n  }\n};\n","import {\n  showErrorMessage,\n  showSuccessMessage,\n  showWarningMessage,\n} from './show-messages';\nimport { getUniqueNodes } from '../api/api-service';\nimport { renderMarkup } from './render-functions';\nimport { refs } from '../utils/refs';\nimport { addLoader, removeLoader } from './loading';\n\n// Search\nexport const onSearchFormSubmit = async event => {\n  event.preventDefault();\n  const inputValue = event.target.elements.searchNode.value.trim();\n\n  if (!inputValue) {\n    showWarningMessage('Fill field');\n    return;\n  }\n\n  try {\n    addLoader();\n    const data = await getUniqueNodes(inputValue);\n\n    if (!data || !data.length) {\n      showErrorMessage('There is no such note matching your request.');\n      return;\n    }\n\n    renderMarkup(data);\n    showSuccessMessage('Search is successful');\n  } catch (error) {\n    showErrorMessage('Error with searching node!');\n  } finally {\n    removeLoader();\n    refs.form.reset();\n  }\n};\n","import { showErrorMessage, showSuccessMessage } from './show-messages';\nimport { addLoader, removeLoader } from './loading';\nimport { deleteNode } from '../api/api-service';\nimport { updateMarkup } from './update-markup';\n\n// Delete or Edit Node\nexport const onNodeBtnsClick = async ({ target }) => {\n  if (target.matches('#deleteNodeBtn')) {\n    try {\n      addLoader();\n      const itemId = target.closest('li').dataset.id;\n      await deleteNode(itemId);\n      await updateMarkup();\n      showSuccessMessage('Node Successfully deleted!');\n    } catch (error) {\n      showErrorMessage('Something went wrong with deleting node');\n    } finally {\n      removeLoader();\n    }\n  }\n  if (target.matches('#editNodeBtn')) {\n    // TODO: Edit node\n  }\n};\n","import {\n  onHandleEscapeKey,\n  modalOverlayClose,\n  onModalFormClick,\n} from './js/components/modal-form';\nimport { onDeleteAllBtnClick } from './js/components/delete-all-nodes';\nimport { onSearchFormSubmit } from './js/components/search-form';\nimport { onNodeBtnsClick } from './js/components/node-btns';\nimport { updateMarkup } from './js/components/update-markup';\nimport { refs } from './js/utils/refs';\n\n// Header Btns\nconst onHeaderBtnClick = ({ target }) => {\n  if (target.matches('#deleteAllNodeBtn')) {\n    onDeleteAllBtnClick();\n  }\n  if (target.matches('#addNodeBtn')) {\n    refs.modalOverlay.classList.add('is-open');\n    refs.modalForm.addEventListener('submit', onModalFormClick);\n    document.addEventListener('keydown', onHandleEscapeKey);\n    refs.modalOverlay.addEventListener('click', modalOverlayClose);\n  }\n};\n\nrefs.headerBtns.addEventListener('click', onHeaderBtnClick);\nrefs.form.addEventListener('submit', onSearchFormSubmit);\nrefs.list.addEventListener('click', onNodeBtnsClick);\n\nupdateMarkup();\n"],"names":["showErrorMessage","message","iziToast","showSuccessMessage","showWarningMessage","refs","addLoader","removeLoader","axios","getAllNodes","error","addNewNode","userData","getUniqueNodes","searchRequest","deleteNode","nodeId","response","createMarkup","id","title","description","renderMarkup","data","markup","node","updateMarkup","onModalFormClick","event","inputValue","textareaValue","userNode","closeModal","onHandleEscapeKey","modalOverlayClose","onDeleteAllBtnClick","result","onSearchFormSubmit","onNodeBtnsClick","target","itemId","onHeaderBtnClick"],"mappings":"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"}